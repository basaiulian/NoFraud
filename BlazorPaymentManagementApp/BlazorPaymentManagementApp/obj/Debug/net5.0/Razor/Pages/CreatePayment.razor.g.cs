#pragma checksum "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "0a3a6c05645f1ff6bb744bc6cd53e388c8b569e0"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorPaymentManagementApp.Pages
{
    #line hidden
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using Microsoft.AspNetCore.Components.Web.Virtualization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using BlazorPaymentManagementApp;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using BlazorPaymentManagementApp.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\_Imports.razor"
using Blazored.LocalStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
using System.ComponentModel.DataAnnotations;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
using BlazorPaymentManagementApp.Model;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
using Newtonsoft.Json.Linq;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
using System.Timers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
using Newtonsoft.Json;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.LayoutAttribute(typeof(CardLayout))]
    [Microsoft.AspNetCore.Components.RouteAttribute("/createpayment")]
    public partial class CreatePayment : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "div");
            __builder.AddAttribute(1, "class", "register-photo");
            __builder.AddAttribute(2, "b-1qhdc9h047");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "form-container");
            __builder.AddAttribute(5, "b-1qhdc9h047");
            __builder.AddMarkupContent(6, "<div class=\"image-holder\" b-1qhdc9h047></div>\n        ");
            __builder.OpenElement(7, "form");
            __builder.AddAttribute(8, "method", "post");
            __builder.AddAttribute(9, "b-1qhdc9h047");
            __builder.OpenComponent<Microsoft.AspNetCore.Components.Forms.EditForm>(10);
            __builder.AddAttribute(11, "Model", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Object>(
#nullable restore
#line 21 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                              payment

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(12, "OnValidSubmit", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<Microsoft.AspNetCore.Components.Forms.EditContext>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Forms.EditContext>(this, 
#nullable restore
#line 21 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                                      Create

#line default
#line hidden
#nullable disable
            )));
            __builder.AddAttribute(13, "ChildContent", (Microsoft.AspNetCore.Components.RenderFragment<Microsoft.AspNetCore.Components.Forms.EditContext>)((context) => (__builder2) => {
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.DataAnnotationsValidator>(14);
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(15, "\n\n                ");
                __builder2.AddMarkupContent(16, "<h2 class=\"text-center\" b-1qhdc9h047><strong b-1qhdc9h047>Payment </strong></h2>\n\n                ");
                __builder2.OpenElement(17, "div");
                __builder2.AddAttribute(18, "class", "form-group");
                __builder2.AddAttribute(19, "b-1qhdc9h047");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputText>(20);
                __builder2.AddAttribute(21, "id", "amount");
                __builder2.AddAttribute(22, "class", "form-control");
                __builder2.AddAttribute(23, "placeholder", "Amount");
                __builder2.AddAttribute(24, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 27 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                                                                                  AmountToSend

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(25, "ValueChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => AmountToSend = __value, AmountToSend))));
                __builder2.AddAttribute(26, "ValueExpression", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() => AmountToSend));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(27, "\n                    ");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateValidationMessage_0(__builder2, 28, 29, 
#nullable restore
#line 28 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                              () => AmountToSend

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(30, "\n\n                ");
                __builder2.OpenElement(31, "div");
                __builder2.AddAttribute(32, "class", "form-group");
                __builder2.AddAttribute(33, "b-1qhdc9h047");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateInputSelect_1(__builder2, 34, 35, "currency", 36, "form-control", 37, 
#nullable restore
#line 32 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                                                                 payment.Currency

#line default
#line hidden
#nullable disable
                , 38, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => payment.Currency = __value, payment.Currency)), 39, () => payment.Currency, 40, (__builder3) => {
                    __builder3.AddMarkupContent(41, "<option b-1qhdc9h047>RON(Default)</option>");
#nullable restore
#line 34 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                         foreach (var currency in currencyList)
                        {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(42, "option");
                    __builder3.AddAttribute(43, "b-1qhdc9h047");
                    __builder3.AddContent(44, 
#nullable restore
#line 36 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
             currency

#line default
#line hidden
#nullable disable
                    );
                    __builder3.CloseElement();
#nullable restore
#line 36 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                              }

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.AddMarkupContent(45, "\n                    ");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateValidationMessage_2(__builder2, 46, 47, 
#nullable restore
#line 38 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                              () => payment.Currency

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(48, "\n\n                ");
                __builder2.AddMarkupContent(49, "<label b-1qhdc9h047>Payment Source</label>\n\n                ");
                __builder2.OpenElement(50, "div");
                __builder2.AddAttribute(51, "class", "form-group");
                __builder2.AddAttribute(52, "b-1qhdc9h047");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateInputSelect_3(__builder2, 53, 54, Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 44 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                           getCities

#line default
#line hidden
#nullable disable
                ), 55, "country", 56, "form-control", 57, "Country", 58, 
#nullable restore
#line 44 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                                                                                                           countryToSend

#line default
#line hidden
#nullable disable
                , 59, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => countryToSend = __value, countryToSend)), 60, () => countryToSend, 61, (__builder3) => {
                    __builder3.AddMarkupContent(62, "<option b-1qhdc9h047>Country</option>");
#nullable restore
#line 46 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                         foreach (string country in countryList)
                        {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(63, "option");
                    __builder3.AddAttribute(64, "b-1qhdc9h047");
                    __builder3.AddContent(65, 
#nullable restore
#line 48 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
             country

#line default
#line hidden
#nullable disable
                    );
                    __builder3.CloseElement();
#nullable restore
#line 48 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                             }

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.AddMarkupContent(66, "\n                    ");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateValidationMessage_4(__builder2, 67, 68, 
#nullable restore
#line 50 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                              () => countryToSend

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(69, "\n\n                ");
                __builder2.OpenElement(70, "div");
                __builder2.AddAttribute(71, "class", "form-group");
                __builder2.AddAttribute(72, "b-1qhdc9h047");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateInputSelect_5(__builder2, 73, 74, "city", 75, "form-control", 76, "City", 77, 
#nullable restore
#line 54 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                                                                                cityToSend

#line default
#line hidden
#nullable disable
                , 78, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => cityToSend = __value, cityToSend)), 79, () => cityToSend, 80, (__builder3) => {
                    __builder3.AddMarkupContent(81, "<option b-1qhdc9h047>City</option>");
#nullable restore
#line 56 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                         foreach (string city in cityList)
                        {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(82, "option");
                    __builder3.AddAttribute(83, "b-1qhdc9h047");
                    __builder3.AddContent(84, 
#nullable restore
#line 58 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
             city

#line default
#line hidden
#nullable disable
                    );
                    __builder3.CloseElement();
#nullable restore
#line 58 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                          }

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(85, "\n                ");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateValidationMessage_6(__builder2, 86, 87, 
#nullable restore
#line 61 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                          () => cityToSend

#line default
#line hidden
#nullable disable
                );
                __builder2.AddMarkupContent(88, "\n\n                ");
                __builder2.OpenElement(89, "div");
                __builder2.AddAttribute(90, "class", "form-group");
                __builder2.AddAttribute(91, "b-1qhdc9h047");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateInputSelect_7(__builder2, 92, 93, "cc_num", 94, "form-control", 95, "Credit Card Number", 96, 
#nullable restore
#line 64 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                                                                                                cc_num

#line default
#line hidden
#nullable disable
                , 97, Microsoft.AspNetCore.Components.EventCallback.Factory.Create(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => cc_num = __value, cc_num)), 98, () => cc_num, 99, (__builder3) => {
                    __builder3.AddMarkupContent(100, "<option b-1qhdc9h047>Credit Card Number</option>");
#nullable restore
#line 66 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                         foreach (string creditCardNumber in creditCardNumbers)
                        {

#line default
#line hidden
#nullable disable
                    __builder3.OpenElement(101, "option");
                    __builder3.AddAttribute(102, "b-1qhdc9h047");
                    __builder3.AddContent(103, 
#nullable restore
#line 68 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
             creditCardNumber

#line default
#line hidden
#nullable disable
                    );
                    __builder3.CloseElement();
#nullable restore
#line 68 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                      }

#line default
#line hidden
#nullable disable
                }
                );
                __builder2.AddMarkupContent(104, "\n                    ");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateValidationMessage_8(__builder2, 105, 106, 
#nullable restore
#line 70 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                              () => cc_num

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(107, "\n\n                ");
                __builder2.OpenElement(108, "div");
                __builder2.AddAttribute(109, "class", "form-group");
                __builder2.AddAttribute(110, "b-1qhdc9h047");
                __builder2.OpenComponent<Microsoft.AspNetCore.Components.Forms.InputText>(111);
                __builder2.AddAttribute(112, "id", "destination");
                __builder2.AddAttribute(113, "class", "form-control");
                __builder2.AddAttribute(114, "placeholder", "Destination(Username)");
                __builder2.AddAttribute(115, "Value", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.String>(
#nullable restore
#line 74 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                                                                                                      payment.Destination

#line default
#line hidden
#nullable disable
                ));
                __builder2.AddAttribute(116, "ValueChanged", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<Microsoft.AspNetCore.Components.EventCallback<System.String>>(Microsoft.AspNetCore.Components.EventCallback.Factory.Create<System.String>(this, Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.CreateInferredEventCallback(this, __value => payment.Destination = __value, payment.Destination))));
                __builder2.AddAttribute(117, "ValueExpression", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Linq.Expressions.Expression<System.Func<System.String>>>(() => payment.Destination));
                __builder2.CloseComponent();
                __builder2.AddMarkupContent(118, "\n                    ");
                __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment.TypeInference.CreateValidationMessage_9(__builder2, 119, 120, 
#nullable restore
#line 75 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
                                              () => payment.Destination

#line default
#line hidden
#nullable disable
                );
                __builder2.CloseElement();
                __builder2.AddMarkupContent(121, "\n\n                ");
                __builder2.AddMarkupContent(122, "<div class=\"form-group\" b-1qhdc9h047><input class=\"btn btn-success btn-block\" type=\"submit\" value=\"Submit\" b-1qhdc9h047></div>");
            }
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(123, "\n    ");
            __builder.OpenElement(124, "h3");
            __builder.AddAttribute(125, "b-1qhdc9h047");
            __builder.AddContent(126, 
#nullable restore
#line 85 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
         message

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(127, "\n    ");
            __builder.OpenElement(128, "h4");
            __builder.AddAttribute(129, "b-1qhdc9h047");
            __builder.AddContent(130, 
#nullable restore
#line 86 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
         message2

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 91 "D:\Facultate\Anul III\[INET] Introducere in .NET\NOFRAUD\Versiune13.48-12.1.2021\BlazorPaymentManagementApp\BlazorPaymentManagementApp\Pages\CreatePayment.razor"
       [Required]
    [RegularExpression(@"^[0-9]+[.][0-9]+|[0-9]+$", ErrorMessage = "Amount must be like \"40\" or \"40.5\".")]
    public string AmountToSend { get; set; }

    private string countryToSend { get; set; }

    private string cityToSend { get; set; }

    private string latitudeToSend { get; set; }

    private string longitudeToSend { get; set; }

    [Required]
    public string cc_num { get; set; }

    private string message2 = "";

    private string message = "";

    private string safeStatus = "Not Safe";

    private List<string> currencyList = new List<string>()
{
       "RON",
       "EUR",
       "GBP",
       "USD"
    };

    private User user = new User();

    private List<User> users = new List<User>();

    private string destinationUserState;

    private string destinationUserCity;

    private string destinationUserId;

    private double distance;

    private Timer aTimer;

    public string localId { get; set; }

    public string prediction { get; set; }

    private List<Address> countries = new List<Address>();

    private List<string> creditCardNumbers = new List<string>();

    private List<string> countryList = new List<string>();

    private List<string> cityList = new List<string>();

    private Payment payment = new Payment();

    private Payment lastPayment = new Payment();

    private List<Payment> payments;

    HttpClient httpClient = new HttpClient()
    {
        BaseAddress = new Uri("http://localhost:5000")
    };

    HttpClient predictorHttpClient = new HttpClient()
    {
        BaseAddress = new Uri("http://localhost:5020")
    };

    protected void getCities()
    {
        cityList.Clear();

        foreach (Address address in countries)
        {
            if (address.Country == countryToSend)
            {
                if (!cityList.Contains(address.City))
                {
                    cityList.Add(address.City);
                }
            }
        }
    }

    protected List<string> getCoordinates(string country, string city)
    {
        foreach (Address address in countries)
        {
            if (address.Country == country && address.City == city && city != "City")
            {
                latitudeToSend = address.Latitude;
                longitudeToSend = address.Longitude;
            }
            if (city == "City")
            {
                latitudeToSend = "-1";
                longitudeToSend = "-1";
                break;
            }
        }
        return new List<string> { latitudeToSend, longitudeToSend };
    }

    protected async Task<string>
    GenerateId(int length)
    {
        string cypher = "123456789";

        var random = new Random();

        string generatedId = "";

        for (int i = 0; i < length; i++)
        {
            generatedId += cypher[random.Next(cypher.Length)];
        }

        return generatedId;
    }

    protected async Task Create()
    {
        List<string> destinationCoordinates = new List<string>();
        List<string> sourceCoordinates = new List<string>();

        payment.Source = user.Username;
        payment.Date = DateTime.Now;
        payment.Amount = Convert.ToSingle(AmountToSend);


        users = await httpClient.GetFromJsonAsync<List<User>>("/api/v1/users");

        if (countryToSend == null || cityToSend == null || countryToSend == "Country" || cityToSend == "City")
        {
            message = "Please insert the payment source (Country and City)!";
        }
        else
        {
            message = "";
            HttpResponseMessage distanceResult = new HttpResponseMessage();
            if (cc_num != "Credit Card Number")
            {

                foreach (User user in users)
                {
                    if (payment.Destination == user.Username)
                    {
                        destinationUserState = user.Address.Substring(0, user.Address.IndexOf(',')).Trim();
                        destinationUserCity = user.Address.Substring(user.Address.LastIndexOf(',') + 1).Trim();
                        destinationCoordinates = getCoordinates(destinationUserState, destinationUserCity);
                        destinationUserId = user.Id.ToString();
                    }
                    else
                    {
                        message = "Please insert the payment destination (Username)!";
                    }
                }

                sourceCoordinates = getCoordinates(countryToSend, cityToSend);

                if ((sourceCoordinates[0] == "-1" && sourceCoordinates[1] == "-1") || (destinationCoordinates[0] == "-1" && destinationCoordinates[1] == "-1"))
                {
                    Console.WriteLine("EROARE -1");
                }
                else
                {
                    message = "";
                    distanceResult = await httpClient.PostAsJsonAsync<List<List<string>>>("/api/v1/payments/distance", new List<List<string>> { sourceCoordinates, destinationCoordinates });
                }
            }

            var Trans_date_trans_time = DateTime.Now;
            var First = user.Username;
            var Trans_distance = distanceResult.Content.ReadAsStringAsync().Result;

            if (payment.Currency == "EUR")
            {
                payment.Amount = float.Parse(AmountToSend) * 4.87F;
            }
            else if (payment.Currency == "USD")
            {
                payment.Amount = float.Parse(AmountToSend) * 4.00F;
            }
            else if (payment.Currency == "GBP")
            {
                payment.Amount = float.Parse(AmountToSend) * 5.48F;
            }

            List<String> listToPredict = new List<String> { Trans_date_trans_time.ToShortDateString(), cc_num, AmountToSend, First, Trans_distance.ToString() };

            if ((Trans_date_trans_time - lastPayment.Date).Hours > 8 && float.Parse(Trans_distance) > 3100F)
            {
                prediction = "1";
                message2 = "The payment is not safe.";
                safeStatus = "Not Safe";
            }
            else
            {
                var predict_response = await predictorHttpClient.PostAsJsonAsync<List<string>>("/fraud/index", listToPredict);
                string returnValue = await predict_response.Content.ReadAsStringAsync();

                JObject jObject = JObject.Parse(returnValue);
                prediction = jObject["prediction"].ToString();

                if (prediction == "0")
                {

                    List<string> transferData = new List<string> { payment.Amount.ToString(), localId, destinationUserId };
                    var transferResult = await httpClient.PostAsJsonAsync<List<string>>("/api/v1/bankaccounts/transfer", transferData);

                    if (transferResult.Content.ReadAsStringAsync().Result == "-1")
                    {
                        message = "Insufficient balance";
                        return;
                    }
                    else
                    {
                        message = "";
                        message2 = "The payment is safe.";
                        safeStatus = "Safe";
                    }
                }
                else if (prediction == "1")
                {
                    message = "The payment is not safe. Payment blocked.";
                    safeStatus = "Not Safe";
                }
            }

            payment.IsFraud = safeStatus;
            payment.Id = Int32.Parse(await GenerateId(4));
            payment.Amount = Convert.ToSingle(AmountToSend);

            await httpClient.PostAsJsonAsync<Payment>("/api/v1/payments", payment);

            payment.Id = Int32.Parse(await GenerateId(4));
            payment.IsFraud = "Received";
            var destination = payment.Destination;
            var source = payment.Source;
            payment.Source = destination;
            payment.Destination = source;

            await httpClient.PostAsJsonAsync<Payment>("/api/v1/payments", payment);

            aTimer = new Timer();
            aTimer.Interval = 2000;

            // Hook up the Elapsed event for the timer.
            aTimer.Elapsed += (sender, args) =>
            {
                NavManager.NavigateTo("/users/" + localId, true);
            };

            // Have the timer fire repeated events (true is the default)
            aTimer.AutoReset = true;

            // Start the timer
            aTimer.Enabled = true;
        }

    }

    protected override async Task OnInitializedAsync()
    {

        countries = await httpClient.GetFromJsonAsync<List<Address>>("/api/v1/payments/countries");

        foreach (Address address in countries)
        {
            if (!countryList.Contains(address.Country))
            {
                countryList.Add(address.Country);
            }
        }

        foreach (string country in countryList)
        {
            Console.WriteLine(country);
        }

        localId = await localStorage.GetItemAsStringAsync("id");
        user = await httpClient.GetFromJsonAsync<User>("/api/v1/users/" + localId);
        foreach (BankAccount bankAccount in user.BankAccounts)
        {
            foreach (Card card in bankAccount.CardList)
            {
                if (!creditCardNumbers.Contains(card.Number))
                {
                    creditCardNumbers.Add(card.Number);
                }
            }
        }

        payments = await httpClient.GetFromJsonAsync<List<Payment>>("/api/v1/payments");

        foreach (Payment payment in payments)
        {
            if (payment.Source == user.Username)
            {
                lastPayment = payment;
            }
        }
    } 

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private IJSRuntime JsRuntime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Blazored.LocalStorage.ILocalStorageService localStorage { get; set; }
    }
}
namespace __Blazor.BlazorPaymentManagementApp.Pages.CreatePayment
{
    #line hidden
    internal static class TypeInference
    {
        public static void CreateValidationMessage_0<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateInputSelect_1<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, System.Object __arg0, int __seq1, System.Object __arg1, int __seq2, TValue __arg2, int __seq3, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg3, int __seq4, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg4, int __seq5, global::Microsoft.AspNetCore.Components.RenderFragment __arg5)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputSelect<TValue>>(seq);
        __builder.AddAttribute(__seq0, "id", __arg0);
        __builder.AddAttribute(__seq1, "class", __arg1);
        __builder.AddAttribute(__seq2, "Value", __arg2);
        __builder.AddAttribute(__seq3, "ValueChanged", __arg3);
        __builder.AddAttribute(__seq4, "ValueExpression", __arg4);
        __builder.AddAttribute(__seq5, "ChildContent", __arg5);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_2<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateInputSelect_3<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Object __arg0, int __seq1, System.Object __arg1, int __seq2, System.Object __arg2, int __seq3, global::System.String __arg3, int __seq4, TValue __arg4, int __seq5, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg5, int __seq6, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg6, int __seq7, global::Microsoft.AspNetCore.Components.RenderFragment __arg7)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputSelect<TValue>>(seq);
        __builder.AddAttribute(__seq0, "onclick", __arg0);
        __builder.AddAttribute(__seq1, "id", __arg1);
        __builder.AddAttribute(__seq2, "class", __arg2);
        __builder.AddAttribute(__seq3, "DisplayName", __arg3);
        __builder.AddAttribute(__seq4, "Value", __arg4);
        __builder.AddAttribute(__seq5, "ValueChanged", __arg5);
        __builder.AddAttribute(__seq6, "ValueExpression", __arg6);
        __builder.AddAttribute(__seq7, "ChildContent", __arg7);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_4<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateInputSelect_5<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, System.Object __arg0, int __seq1, System.Object __arg1, int __seq2, global::System.String __arg2, int __seq3, TValue __arg3, int __seq4, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg4, int __seq5, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg5, int __seq6, global::Microsoft.AspNetCore.Components.RenderFragment __arg6)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputSelect<TValue>>(seq);
        __builder.AddAttribute(__seq0, "id", __arg0);
        __builder.AddAttribute(__seq1, "class", __arg1);
        __builder.AddAttribute(__seq2, "DisplayName", __arg2);
        __builder.AddAttribute(__seq3, "Value", __arg3);
        __builder.AddAttribute(__seq4, "ValueChanged", __arg4);
        __builder.AddAttribute(__seq5, "ValueExpression", __arg5);
        __builder.AddAttribute(__seq6, "ChildContent", __arg6);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_6<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateInputSelect_7<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, System.Object __arg0, int __seq1, System.Object __arg1, int __seq2, System.Object __arg2, int __seq3, TValue __arg3, int __seq4, global::Microsoft.AspNetCore.Components.EventCallback<TValue> __arg4, int __seq5, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg5, int __seq6, global::Microsoft.AspNetCore.Components.RenderFragment __arg6)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.InputSelect<TValue>>(seq);
        __builder.AddAttribute(__seq0, "id", __arg0);
        __builder.AddAttribute(__seq1, "class", __arg1);
        __builder.AddAttribute(__seq2, "placeholder", __arg2);
        __builder.AddAttribute(__seq3, "Value", __arg3);
        __builder.AddAttribute(__seq4, "ValueChanged", __arg4);
        __builder.AddAttribute(__seq5, "ValueExpression", __arg5);
        __builder.AddAttribute(__seq6, "ChildContent", __arg6);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_8<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
        public static void CreateValidationMessage_9<TValue>(global::Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder, int seq, int __seq0, global::System.Linq.Expressions.Expression<global::System.Func<TValue>> __arg0)
        {
        __builder.OpenComponent<global::Microsoft.AspNetCore.Components.Forms.ValidationMessage<TValue>>(seq);
        __builder.AddAttribute(__seq0, "For", __arg0);
        __builder.CloseComponent();
        }
    }
}
#pragma warning restore 1591
